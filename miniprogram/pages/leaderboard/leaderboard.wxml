<view class="page-container">
  <view class="header">
    <view class="subtitle">{{dimensionConfig[currentDimension].subtitle}}</view>
    
    <!-- ç»´åº¦åˆ‡æ¢ -->
    <view class="dimension-selector">
      <scroll-view class="dimension-scroll" scroll-x="true">
        <view class="dimension-item {{currentDimension === 'score' ? 'active' : ''}}" 
              bindtap="onDimensionChange" data-dimension="score">
          <view class="dimension-icon">ğŸ†</view>
          <view class="dimension-name">ç»¼åˆæ¦œ</view>
        </view>
        <view class="dimension-item {{currentDimension === 'efficiency' ? 'active' : ''}}" 
              bindtap="onDimensionChange" data-dimension="efficiency">
          <view class="dimension-icon">âš¡</view>
          <view class="dimension-name">æ•ˆç‡æ¦œ</view>
        </view>
        <view class="dimension-item {{currentDimension === 'stability' ? 'active' : ''}}" 
              bindtap="onDimensionChange" data-dimension="stability">
          <view class="dimension-icon">ğŸ¯</view>
          <view class="dimension-name">ç¨³å®šæ¦œ</view>
        </view>

      </scroll-view>
    </view>
    

  </view>

  <view class="podium" wx:if="{{leaderboardList.length >= 3}}">
    <view class="podium-item silver" bindtap="onPlayerTap" data-player="{{leaderboardList[1]}}">
      <image class="avatar" src="{{leaderboardList[1].avatarUrl}}"></image>
      <view class="nickname">{{leaderboardList[1].nickName}}</view>

      <view class="podium-stats" wx:if="{{showDetailStats}}">
        <text class="podium-stat-item">{{leaderboardList[1].homeworkCount}}æ¬¡</text>
        <text class="podium-stat-item">{{leaderboardList[1].avgTime}}åˆ†é’Ÿ</text>
        <text class="podium-stat-item">{{leaderboardList[1].consecutiveCorrect}}è¿å¯¹</text>
      </view>
      <view class="score" wx:else>{{dimensionConfig[currentDimension].getValue(leaderboardList[1])}}</view>
      <view class="rank-badge">2</view>
    </view>
    <view class="podium-item gold" bindtap="onPlayerTap" data-player="{{leaderboardList[0]}}">
      <image class="avatar" src="{{leaderboardList[0].avatarUrl}}"></image>
      <view class="nickname">{{leaderboardList[0].nickName}}</view>

      <view class="podium-stats" wx:if="{{showDetailStats}}">
        <text class="podium-stat-item">{{leaderboardList[0].homeworkCount}}æ¬¡</text>
        <text class="podium-stat-item">{{leaderboardList[0].avgTime}}åˆ†é’Ÿ</text>
        <text class="podium-stat-item">{{leaderboardList[0].consecutiveCorrect}}è¿å¯¹</text>
      </view>
      <view class="score" wx:else>{{dimensionConfig[currentDimension].getValue(leaderboardList[0])}}</view>
      <view class="rank-badge">1</view>
    </view>
    <view class="podium-item bronze" bindtap="onPlayerTap" data-player="{{leaderboardList[2]}}">
      <image class="avatar" src="{{leaderboardList[2].avatarUrl}}"></image>
      <view class="nickname">{{leaderboardList[2].nickName}}</view>

      <view class="podium-stats" wx:if="{{showDetailStats}}">
        <text class="podium-stat-item">{{leaderboardList[2].homeworkCount}}æ¬¡</text>
        <text class="podium-stat-item">{{leaderboardList[2].avgTime}}åˆ†é’Ÿ</text>
        <text class="podium-stat-item">{{leaderboardList[2].consecutiveCorrect}}è¿å¯¹</text>
      </view>
      <view class="score" wx:else>{{dimensionConfig[currentDimension].getValue(leaderboardList[2])}}</view>
      <view class="rank-badge">3</view>
    </view>
  </view>

  <view class="rank-list">
    <block wx:for="{{leaderboardList}}" wx:for-item="player" wx:key="index">
      <view class="rank-item" wx:if="{{index >= 3}}" bindtap="onPlayerTap" data-player="{{player}}">
        <view class="rank-number">{{index + 1}}</view>
        <image class="rank-avatar" src="{{player.avatarUrl}}"></image>
        <view class="rank-info">
          <view class="rank-nickname">{{player.nickName}}</view>

          <view class="rank-stats" wx:if="{{showDetailStats}}">
            <text class="stat-item">å·²å®Œæˆ {{player.homeworkCount}} æ¬¡</text>
            <text class="stat-item">å¹³å‡ç”¨æ—¶ {{player.avgTime}} åˆ†é’Ÿ</text>
            <text class="stat-item">è¿ç»­æ­£ç¡® {{player.consecutiveCorrect}} æ¬¡</text>
            <text class="stat-item">é”™é¢˜ä¿®å¤ç‡ {{player.mistakeFixRate}}%</text>
          </view>
          <view class="rank-primary-stat" wx:else>
            {{dimensionConfig[currentDimension].description(player)}}
          </view>
        </view>
        <view class="rank-score">{{dimensionConfig[currentDimension].getValue(player)}}</view>
        <view class="expand-icon" wx:if="{{!showDetailStats}}">â€º</view>
      </view>
    </block>
  </view>

  <!-- è¯¦ç»†ç»Ÿè®¡åˆ‡æ¢æŒ‰é’® -->
  <view class="stats-toggle" bindtap="toggleDetailStats">
    <text>{{showDetailStats ? 'æ”¶èµ·è¯¦æƒ…' : 'å±•å¼€è¯¦æƒ…'}}</text>
  </view>

  <view class="loading-state" wx:if="{{isLoading}}">åŠ è½½ä¸­...</view>
  <view class="empty-state" wx:if="{{!isLoading && leaderboardList.length === 0}}">
    è¿˜æ²¡æœ‰äººå®Œæˆä½œä¸šï¼Œå¿«å»äº‰å¤ºç¬¬ä¸€åå§ï¼
  </view>
</view>